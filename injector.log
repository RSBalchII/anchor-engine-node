INFO:ece.agents.tier3.injector.db_manager:Neo4jManager initialized with URI: bolt://localhost:7688
INFO:ece.agents.tier3.injector.db_manager:Connected to Neo4j database
INFO:injector_agent:InjectorAgent initialized successfully
/home/rsbiiw/projects/External-Context-Engine/ece/agents/tier3/injector/injector_api.py:128: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("shutdown")
INFO:     Will watch for changes in these directories: ['/home/rsbiiw/projects/External-Context-Engine']
INFO:     Uvicorn running on http://0.0.0.0:8004 (Press CTRL+C to quit)
INFO:     Started reloader process [17367] using StatReload
INFO:ece.agents.tier3.injector.db_manager:Neo4jManager initialized with URI: bolt://localhost:7688
INFO:ece.agents.tier3.injector.db_manager:Connected to Neo4j database
INFO:injector_agent:InjectorAgent initialized successfully
INFO:ece.agents.tier3.injector.db_manager:Neo4jManager initialized with URI: bolt://localhost:7688
INFO:ece.agents.tier3.injector.db_manager:Connected to Neo4j database
INFO:injector_agent:InjectorAgent initialized successfully
INFO:     Started server process [17400]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:injector_api:Received data for injection: 1 entities, 1 relationships
INFO:injector_api:Calling injector_agent.receive_data_for_injection
INFO:injector_agent:Translating data to 2 Cypher queries
WARNING:ece.agents.tier3.injector.db_manager:Transient error occurred: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused). Retrying in 1.95 seconds (attempt 1/3)
WARNING:ece.agents.tier3.injector.db_manager:Transient error occurred: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused). Retrying in 2.67 seconds (attempt 2/3)
WARNING:ece.agents.tier3.injector.db_manager:Transient error occurred: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused). Retrying in 4.53 seconds (attempt 3/3)
ERROR:ece.agents.tier3.injector.db_manager:Failed to execute transaction after 3 attempts: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused)
ERROR:injector_agent:Failed to execute Cypher queries: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused)
ERROR:injector_agent:Error during data injection: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused)
ERROR:injector_agent:Handling error [ServiceUnavailable]: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused)
INFO:injector_api:Received result from injector_agent: {'success': False, 'error': 'Database connection error', 'error_type': 'ServiceUnavailable', 'details': 'Unable to connect to the Neo4j database. Please check connection settings and database status.'}
ERROR:injector_api:Failed to inject data: Database connection error
INFO:     127.0.0.1:34736 - "POST /internal/data_to_inject HTTP/1.1" 500 Internal Server Error
INFO:injector_api:Received data for injection: 1 entities, 1 relationships
INFO:injector_api:Calling injector_agent.receive_data_for_injection
INFO:injector_agent:Translating data to 2 Cypher queries
WARNING:ece.agents.tier3.injector.db_manager:Transient error occurred: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused). Retrying in 1.64 seconds (attempt 1/3)
WARNING:ece.agents.tier3.injector.db_manager:Transient error occurred: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused). Retrying in 2.03 seconds (attempt 2/3)
WARNING:ece.agents.tier3.injector.db_manager:Transient error occurred: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused). Retrying in 4.20 seconds (attempt 3/3)
ERROR:ece.agents.tier3.injector.db_manager:Failed to execute transaction after 3 attempts: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused)
ERROR:injector_agent:Failed to execute Cypher queries: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused)
ERROR:injector_agent:Error during data injection: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused)
ERROR:injector_agent:Handling error [ServiceUnavailable]: Couldn't connect to localhost:7688 (resolved to ('127.0.0.1:7688',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7688)) (reason [Errno 111] Connection refused)
INFO:injector_api:Received result from injector_agent: {'success': False, 'error': 'Database connection error', 'error_type': 'ServiceUnavailable', 'details': 'Unable to connect to the Neo4j database. Please check connection settings and database status.'}
ERROR:injector_api:Failed to inject data: Database connection error
INFO:     127.0.0.1:46774 - "POST /internal/data_to_inject HTTP/1.1" 500 Internal Server Error
